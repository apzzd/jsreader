<html>
<template id='feeditemtemplate'>
	<article>
		<h2><a href="" target="_blank" rel="noopener"></a></h2>
		<p></p>
	</article>
</template>

	<head>
		<script type="text/javascript">
// Thank you https://css-tricks.com/how-to-fetch-and-parse-rss-feeds-in-javascript/.

// TODO: move urls to local storage
const feeditemtemplate = document.getElementById('feeditemtemplate').content;

fetchfeeds();

function fetchfeeds(){
	var rssurls = ['https://codepen.io/picks/feed/','https://www.sans.org/tip-of-the-day/rss'];

	rssurls.forEach(url => fetchfeed(`${url}`));
}

function fetchfeed(url){
fetch(url)
	.then(response => response.text())
	.then(str => new window.DOMParser().parseFromString(str, "text/xml"))
	.then(data => {
// 		console.log(data);
 		const items = data.querySelectorAll("item");
 //		console.log(items);
 		console.log(feeditemtemplate);
 //		html = '';
		items.forEach(el => {
			node = document.importNode(feeditemtemplate, true);
			node.querySelector('a').text = `${el.querySelector("title").innerHTML}`;
			document.body.appendChild(node);
		});
 	});
}
		</script>
	</head>
	<body>
			<div id='demo'></div>



	</body>
</html>

